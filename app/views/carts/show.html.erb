<h2>Your Shopping Cart</h2>

<% if @cart_items_with_products.any? %>
  <ul>
    <% @cart_items_with_products.each do |product, quantity| %>
      <li>
        <%= form_with url: update_cart_item_path(product_id: product.id), method: :patch, local: true do |form| %>
          <%= product.name %>
          <%= form.number_field :quantity, value: quantity, min: 1 %>
          x $<%= product.price %>
          <%= form.hidden_field :product_id, value: product.id %>
          <%= form.submit "Update" %>
        <% end %>
        <%= button_to 'Remove', remove_from_cart_path(product_id: product.id), method: :delete %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>Your cart is empty.</p>
<% end %>

<%= link_to 'Continue Shopping', products_path %>


